<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Girl Photo & Video Gallery ✨</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #f0f8ff, #ffe4e1);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        h1, h2 { text-align:center; margin-bottom:20px; color:#ff69b4; }
        nav { text-align:center; margin-bottom:30px; }
        nav button {
            background:#ff69b4; color:white; border:none; padding:12px 24px;
            margin:6px; cursor:pointer; border-radius:30px; font-weight:bold;
            transition:all 0.3s;
        }
        nav button:hover { background:#ff1493; transform:translateY(-2px); }
        nav button.active { background:#ff1493; box-shadow:0 4px 12px rgba(255,20,147,0.4); }
        section { margin-bottom:60px; animation:fadeIn 1.2s ease-out; display:none; }
        section.active { display:block; }
        @keyframes fadeIn { from {opacity:0; transform:translateY(30px);} to {opacity:1; transform:translateY(0);} }
        .gallery {
            display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
            gap:25px; padding:0 10px;
        }
        .gallery-item {
            position:relative; overflow:hidden; border-radius:16px;
            box-shadow:0 6px 15px rgba(0,0,0,0.12); cursor:pointer;
            transition:all 0.4s ease;
        }
        .gallery-item:hover {
            transform:scale(1.04) translateY(-8px);
            box-shadow:0 12px 30px rgba(0,0,0,0.18);
        }
        .gallery-item img, .gallery-item video {
            width:100%; height:auto; display:block; transition:transform 0.6s ease;
        }
        .gallery-item:hover img, .gallery-item:hover video { transform:scale(1.08); }
        .overlay {
            position:absolute; bottom:0; left:0; right:0;
            background:linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color:white; padding:15px 12px 12px; text-align:center;
            transform:translateY(100%); transition:transform 0.4s ease;
        }
        .gallery-item:hover .overlay { transform:translateY(0); }

        /* ─────────────── Lightbox ─────────────── */
        #lightbox {
            display:none; position:fixed; inset:0; background:rgba(0,0,0,0.92);
            z-index:9999; align-items:center; justify-content:center; opacity:0;
            transition:opacity 0.4s ease; touch-action:pan-y pinch-zoom;
        }
        #lightbox.active { display:flex; opacity:1; }
        
        .lightbox-wrapper {
            position: relative;
            width: 95vw;
            max-width: 1200px;
            height: 90vh;
            overflow: hidden;
            border-radius: 12px;
        }

        .lightbox-slider {
            position: absolute;
            inset: 0;
            display: flex;
            transition: transform 0.45s cubic-bezier(0.32, 0.72, 0.1, 1);
            will-change: transform;
        }

        .lightbox-slide {
            flex: 0 0 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .lightbox-slide img, .lightbox-slide video {
            max-width: 100%;
            max-height: 85vh;
            border-radius: 12px;
            box-shadow: 0 0 40px rgba(0,0,0,0.6);
            object-fit: contain;
            transition: transform 0.4s ease;
        }

        .close {
            position:absolute; top:20px; right:25px; color:white;
            font-size:48px; font-weight:bold; cursor:pointer;
            text-shadow:0 0 10px black; transition:all 0.3s; z-index:10;
        }
        .close:hover { color:#ff69b4; transform:rotate(90deg); }

        .nav-arrow {
            position:absolute; top:50%; transform:translateY(-50%);
            color:white; font-size:60px; cursor:pointer; user-select:none;
            text-shadow:0 0 15px black; transition:all 0.3s; z-index:5;
        }
        .nav-arrow:hover { color:#ff69b4; transform:translateY(-50%) scale(1.15); }
        #prev { left:20px; }
        #next { right:20px; }

        @media (max-width:768px) {
            .close { top:15px; right:20px; font-size:40px; }
            .nav-arrow { font-size:50px; }
            #prev { left:10px; }
            #next { right:10px; }
        }
        @media (max-width:600px) { .gallery { grid-template-columns:1fr; } }
    </style>
</head>
<body>

    <h1>✨ Happy Birthday Gallery ✨</h1>

    <nav id="filter-nav">
        <button data-filter="all" class="active">All Memories</button>
        <button data-filter="childhood">Childhood</button>
        <button data-filter="teenage">Teen Years</button>
        <button data-filter="recent">Recent Times</button>
        <button data-filter="videos">Videos</button>
    </nav>

    <!-- Example sections – replace with your real media -->
    <section id="childhood" class="active">
        <h2>Childhood Moments</h2>
        <div class="gallery">
            <div class="gallery-item" data-category="childhood">
                <img src="https://via.placeholder.com/400x500?text=Childhood+1" alt="Childhood 1" data-type="image">
                <div class="overlay">First steps & smiles</div>
            </div>
            <div class="gallery-item" data-category="childhood">
                <img src="https://via.placeholder.com/400x500?text=Childhood+2" alt="Childhood 2" data-type="image">
                <div class="overlay">Birthday cake disaster</div>
            </div>
            <!-- Add more items -->
        </div>
    </section>

    <!-- Add other sections (teenage, recent, videos) here -->

    <!-- Lightbox -->
    <div id="lightbox">
        <span class="close" id="close">&times;</span>
        <span class="nav-arrow" id="prev">&#10094;</span>
        <div class="lightbox-wrapper">
            <div class="lightbox-slider" id="lightbox-slider"></div>
        </div>
        <span class="nav-arrow" id="next">&#10095;</span>
    </div>

    <script>
        // Filter logic
        const buttons = document.querySelectorAll('#filter-nav button');
        const sections = document.querySelectorAll('section');

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                buttons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filter = btn.dataset.filter;
                sections.forEach(sec => {
                    sec.classList.toggle('active', filter === 'all' || sec.id === filter);
                });
            });
        });

        // ─────────────── Lightbox with smooth swipe ───────────────
        const lightbox = document.getElementById('lightbox');
        const slider = document.getElementById('lightbox-slider');
        const closeBtn = document.getElementById('close');
        const prevBtn = document.getElementById('prev');
        const nextBtn = document.getElementById('next');

        let currentItems = [];
        let currentIndex = 0;
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;
        let touchDiffX = 0;
        const SWIPE_THRESHOLD = 70;

        function openLightbox(index, items) {
            currentItems = items;
            currentIndex = index;
            renderSlides();
            updatePosition();
            lightbox.classList.add('active');
        }

        function renderSlides() {
            slider.innerHTML = '';
            currentItems.forEach((item, i) => {
                const slide = document.createElement('div');
                slide.className = 'lightbox-slide';

                const isVideo = item.querySelector('video') || item.dataset.type === 'video';
                let content = '';

                if (isVideo) {
                    const videoSrc = item.querySelector('source')?.src || item.querySelector('video')?.currentSrc || '';
                    content = `<video controls autoplay loop>
                        <source src="${videoSrc}" type="video/mp4">
                        Your browser does not support video.
                    </video>`;
                } else {
                    const imgSrc = item.querySelector('img').src;
                    content = `<img src="${imgSrc}" alt="Full view">`;
                }

                slide.innerHTML = content;
                slider.appendChild(slide);
            });
        }

        function updatePosition() {
            slider.style.transform = `translateX(-${currentIndex * 100}%)`;
        }

        function nextMedia() {
            if (currentIndex < currentItems.length - 1) {
                currentIndex++;
                updatePosition();
            }
        }

        function prevMedia() {
            if (currentIndex > 0) {
                currentIndex--;
                updatePosition();
            }
        }

        // Open lightbox
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', e => {
                if (e.target.closest('video')) return;
                const visibleSection = document.querySelector('section.active');
                const visibleItems = visibleSection ? visibleSection.querySelectorAll('.gallery-item') : [];
                const index = Array.from(visibleItems).indexOf(item);
                openLightbox(index, visibleItems);
            });
        });

        // Controls
        closeBtn.addEventListener('click', () => lightbox.classList.remove('active'));
        lightbox.addEventListener('click', e => { if (e.target === lightbox) lightbox.classList.remove('active'); });
        nextBtn.addEventListener('click', nextMedia);
        prevBtn.addEventListener('click', prevMedia);

        // Keyboard
        document.addEventListener('keydown', e => {
            if (!lightbox.classList.contains('active')) return;
            if (e.key === 'Escape') lightbox.classList.remove('active');
            if (e.key === 'ArrowRight') nextMedia();
            if (e.key === 'ArrowLeft') prevMedia();
        });

        // ─────────────── Swipe with smooth animation ───────────────
        lightbox.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
            touchDiffX = 0;
            slider.style.transition = 'none';
        }, { passive: false });

        lightbox.addEventListener('touchmove', e => {
            touchDiffX = e.changedTouches[0].screenX - touchStartX;
            const diffY = Math.abs(e.changedTouches[0].screenY - touchStartY);

            // Only allow horizontal swipe if movement is mostly horizontal
            if (diffY < 40) {
                e.preventDefault();
                slider.style.transform = `translateX(calc(-${currentIndex * 100}% + ${touchDiffX}px))`;
            }
        }, { passive: false });

        lightbox.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            slider.style.transition = 'transform 0.45s cubic-bezier(0.32, 0.72, 0.1, 1)';

            const diffX = touchStartX - touchEndX;

            if (Math.abs(diffX) > SWIPE_THRESHOLD) {
                if (diffX > 0) {
                    nextMedia();
                } else {
                    prevMedia();
                }
            } else {
                // Snap back if swipe was too small
                updatePosition();
            }
        }, { passive: false });
    </script>
</body>
</html>
