<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Identity Verification | The Gate</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

    <style>
        /* --- THEME STYLES --- */
        :root { --gold: #d4af37; --deep-purple: #2e1065; }
        body { background-color: #0f0518; color: #fff; font-family: 'Montserrat', sans-serif; overflow: hidden; }
        .font-cinematic { font-family: 'Cormorant Garamond', serif; }

        /* --- MAGIC MIRROR CONTAINER --- */
        .hud-container { 
            position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; 
            background: radial-gradient(circle at center, #2e1065 0%, #0f0518 100%); 
        }
        
        /* --- THE MIRROR FRAME --- */
        .scan-frame { 
            width: 300px; height: 380px; 
            border: 8px double rgba(212, 175, 55, 0.6); 
            border-radius: 50% / 40%; /* Oval Shape */
            position: relative; 
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.3), inset 0 0 30px rgba(0,0,0,0.5); 
            background: #000;
            overflow: hidden;
            transition: border-color 1s ease, box-shadow 1s ease;
        }

        /* --- ORNAMENTAL BRACKETS --- */
        .bracket { position: absolute; width: 20px; height: 20px; border-radius: 50%; background: var(--gold); box-shadow: 0 0 10px var(--gold); z-index: 30; }
        .tl { top: 15px; left: 50%; transform: translateX(-50%); } 
        .bl { bottom: 15px; left: 50%; transform: translateX(-50%); }

        /* --- SCANNING BEAM --- */
        .scan-line { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, transparent 60%);
            opacity: 0; will-change: opacity, transform; mix-blend-mode: overlay;
            pointer-events: none;
        }

        /* --- BACKGROUND SPARKLES --- */
        .sparkle-bg { 
            position: absolute; inset: 0; 
            background-image: radial-gradient(white 1px, transparent 1px); 
            background-size: 30px 30px; 
            opacity: 0.3; animation: twinkle 4s infinite;
        }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.6; } }
    </style>
</head>
<body>

    <audio id="sfx-scan" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio> 
    <audio id="sfx-success" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" preload="auto"></audio>

    <div class="hud-container">
        <div class="sparkle-bg"></div>
        
        <div class="flex flex-col items-center gap-8 relative z-10 p-4">
            
            <div class="scan-frame" id="scanner">
                <div class="bracket tl"></div> 
                <div class="bracket bl"></div>
                
                <img id="id-photo" 
                     src="media/4.jpeg" 
                     class="absolute inset-0 w-full h-full object-cover opacity-0 transition-all duration-1000"
                     style="filter: sepia(80%) brightness(0.6) blur(2px);" 
                     alt="Target Identity">

                <div class="scan-line z-20"></div>
            </div>

            <div class="text-center space-y-2">
                <h2 id="status" class="text-3xl font-cinematic font-bold tracking-widest text-[#fcf6ba]" style="text-shadow: 0 0 10px #d4af37;">REFLECTION HIDDEN</h2>
                <p id="sub-status" class="text-sm font-light italic opacity-80 text-[#e9d5ff]">"Show your true self to enter"</p>
            </div>
            
            <button id="start-btn" class="px-10 py-4 border border-[#d4af37] text-[#fcf6ba] hover:bg-[#d4af37] hover:text-white transition-all duration-500 tracking-[0.2em] uppercase text-xs font-bold rounded-full shadow-[0_0_20px_rgba(212,175,55,0.4)] animate-pulse">
                Reveal Magic
            </button>
        </div>
    </div>

    <script>
        const hud = {
            startBtn: document.getElementById('start-btn'),
            scanLine: document.querySelector('.scan-line'),
            photo: document.getElementById('id-photo'),
            sfxScan: document.getElementById('sfx-scan'),
            sfxSuccess: document.getElementById('sfx-success'),
            
            init: function() {
                this.startBtn.addEventListener('click', () => this.start());
            },
            
            start: function() {
                // 1. Hide Button & Play Sound
                this.startBtn.style.display = 'none';
                this.sfxScan.play().catch(e => console.log(e));

                // 2. Reveal Ghostly Photo
                this.photo.style.opacity = "0.7"; 

                // 3. Text Scramble Animation (Runes effect)
                const statusEl = document.getElementById('status');
                let idx = 0;
                const text = "AWAKENING SPIRIT...";
                const chars = "✨★☾☼✦⚡︎";
                const interval = setInterval(() => {
                    statusEl.innerText = text.split('').map((char, i) => i < idx ? char : chars[Math.floor(Math.random() * chars.length)]).join('');
                    if (idx >= text.length) clearInterval(interval);
                    idx += 1/3;
                }, 50);
                
                // 4. Magical Beam Animation
                gsap.to(this.scanLine, { opacity: 1, duration: 0.5 });
                gsap.fromTo(this.scanLine, 
                    { scale: 0, opacity: 0 },
                    { 
                        scale: 1.5,
                        opacity: 1,
                        background: "radial-gradient(circle, rgba(255,255,255,0.9) 0%, transparent 70%)",
                        duration: 3, 
                        ease: "power2.inOut", 
                        onComplete: () => this.success() 
                    }
                );
            },
            
            success: function() {
                this.sfxScan.pause();
                this.sfxSuccess.play().catch(e => console.log(e));
                
                // Success Text
                const status = document.getElementById('status');
                status.innerText = "SOUL RECOGNIZED";
                status.style.color = "#d4af37";
                status.style.textShadow = "0 0 20px #d4af37";
                
                // Mirror Glow (Turns White/Gold)
                const frame = document.querySelector('.scan-frame');
                frame.style.borderColor = "#fff";
                frame.style.boxShadow = "0 0 60px #fff, inset 0 0 30px #fff";

                // Full Color Photo Reveal
                this.photo.style.filter = "none";
                this.photo.style.opacity = "1";
                this.photo.style.transform = "scale(1.05)";
                
                // REDIRECT TO MAIN PAGE
                setTimeout(() => {
                    gsap.to("body", { opacity: 0, duration: 1.5, onComplete: () => {
                        window.location.href = 'home.html'; 
                    }});
                }, 2500);
            }
        };

        window.onload = () => hud.init();
    </script>
</body>
</html>
